<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>Customization | Crossfeed</title>



<meta name="description" content="Crossfeed">





    



<link rel="stylesheet"
  href="/assets/css/uswds-theme.css"
  media="screen">


    
  </head>
  <body class="  ">

    <a class="usa-skipnav" href="#main-content">Skip to main content</a>

    




  <div class="usa-overlay"></div>

  <header class="usa-header usa-header--basic" role="banner">


  
    <div class="usa-nav-container">
  
    <div class="usa-navbar">
      <div class="usa-logo" id="header-logo">
        <a
          href="/"
          title="Home">
          
          <em class="usa-logo__text">
            Crossfeed
          </em>
        </a>
      </div>
      <button class="usa-menu-btn">Menu</button>
    </div>

    <nav role="navigation" class="usa-nav">
      <div class="usa-nav__inner">
        <button class="usa-nav__close">
          <img src="/assets/uswds/img/close.svg" alt="close">
        </button>

        
        
        
        <ul class="usa-nav__primary usa-accordion">
          
          <li class="usa-nav__primary-item">
            
              <a class=" usa-nav__link  " href="/usage/">
                <span>User Guide</span>
              </a>
            
          </li>
          
          <li class="usa-nav__primary-item">
            
              <a class=" usa-nav__link  " href="/contributing/">
                <span>Contributing</span>
              </a>
            
          </li>
          
          <li class="usa-nav__primary-item">
            
              <a class=" usa-nav__link  " href="/scans/">
                <span>Scanning FAQ</span>
              </a>
            
          </li>
          
        </ul>
        

        
          
          
        

        


        </div>
      </div>
    </nav>
  
    </div>
  
  </header>




    
    


    

    

    
      
      




    
    

    
      <div class="usa-section">
  <div class="grid-container">
    <div class="grid-row grid-gap flex-align-start">
      
      
        <div class="usa-layout-docs__sidenav desktop:grid-col-3">
          <nav aria-label="Secondary navigation">
  <ul class="usa-sidenav">
    
      
      
      
    <li class="usa-sidenav__item">
      <a href="/usage/"
         
          >
         Getting Started
      </a>
      
    </li>
    
      
      
      
    <li class="usa-sidenav__item">
      <a href="/usage/administration/"
         
          >
         Administration
      </a>
      
    </li>
    
      
      
      
    <li class="usa-sidenav__item">
      <a href="/usage/customization/"
          class="usa-current" 
          >
         Customization
      </a>
      
    </li>
    
  </ul>
</nav>

        </div>
      

      <main class="usa-layout-docs usa-layout-docs__main usa-prose desktop:grid-col-9" id="main-content">
        
          <h1>Customization</h1>
        
        <h2 id="creating-your-own-instance-of-crossfeed">Creating your own instance of Crossfeed</h2>

<p>When you create your own instance of Crossfeed, you can customize many aspects of how it looks.</p>

<p>The <code class="language-plaintext highlighter-rouge">dev.env.example</code> file contains a full list of all customizable variables.</p>

<h2 id="user-agent-and-signing-requests">User Agent and signing requests</h2>

<p>Crossfeedâ€™s workers, when performing requets, can optionally send a User Agent identifying the requestor as Crossfeed
and a <code class="language-plaintext highlighter-rouge">Signature</code> header to verify that Crossfeed is performing the request.</p>

<p>To do this, you can set the <code class="language-plaintext highlighter-rouge">WORKER_USER_AGENT</code>, the <code class="language-plaintext highlighter-rouge">WORKER_SIGNATURE_PUBLIC_KEY</code>, and the <code class="language-plaintext highlighter-rouge">WORKER_SIGNATURE_PRIVATE_KEY</code> parameters in your env file:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>WORKER_USER_AGENT="Crossfeed (Test request from Crossfeed Staging Environment, for development use only. For more information, see https://github.com/cisagov/crossfeed)"
WORKER_SIGNATURE_PUBLIC_KEY="public key, can have newlines"
WORKER_SIGNATURE_PRIVATE_KEY="private key, can have newlines"
</code></pre></div></div>

<h3 id="generating-rsa-keys">Generating RSA keys</h3>

<p>The public and private key values can be generated by running:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-keygen <span class="nt">-m</span> PEM <span class="nt">-t</span> rsa <span class="nt">-f</span> test_key
ssh-keygen <span class="nt">-f</span> test_key.pub <span class="nt">-m</span> <span class="s1">'PEM'</span> <span class="nt">-e</span> <span class="o">&gt;</span> test_key.pem
</code></pre></div></div>

<p>The public key is the value of <code class="language-plaintext highlighter-rouge">test_key.pem</code> and the private key is the value of <code class="language-plaintext highlighter-rouge">test_key</code>.</p>

<h3 id="verifying-a-request">Verifying a request</h3>

<p>One can then verify that requests are coming from Crossfeed by providing you with the following parts of the request:</p>
<ul>
  <li>Value of the <code class="language-plaintext highlighter-rouge">Date</code> header</li>
  <li>Value of the <code class="language-plaintext highlighter-rouge">Signature</code> header</li>
  <li>Request method</li>
  <li>Request URL</li>
</ul>

<p>You can call the <code class="language-plaintext highlighter-rouge">SignRequests.verify_signature</code> method (found in <code class="language-plaintext highlighter-rouge">backend/worker/mitmproxy_sign_requests.py</code>) to verify a signature with
the above four parts of a request. Crossfeed will later have an admin UI that allows admins to run this check directly from the web interface.</p>

<p>Note that when deploying Crossfeed to AWS, the worker signature public and private keys should also be set as SSM secrets (such as <code class="language-plaintext highlighter-rouge">/crossfeed/staging/WORKER_SIGNATURE_PUBLIC_KEY</code> and <code class="language-plaintext highlighter-rouge">/crossfeed/staging/WORKER_SIGNATURE_PRIVATE_KEY</code>).</p>


      </main>
    </div>
  </div>
</div>

    

    

    


  
<footer class="usa-footer">

  

  
    <div class="grid-container usa-footer__return-to-top">
      <a href="#">Return to top</a>
    </div>
  

  

  

</footer>





    





  
    
      <script src="/assets/uswds/js/uswds.min.js" async></script>
    

  
    






  </body>
</html>
